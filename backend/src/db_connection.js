"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.connectToDB=exports.pool=void 0;const pg_1=require("pg");const logger_1=require("./logger");exports.pool=new pg_1.Pool({user:"TIE",host:"db",database:"tie-DB",password:"TIE-International",port:5432});const connectToDB=async(retries=5)=>{while(retries>0){try{await exports.pool.query("SELECT NOW()");logger_1.logger.info("Connected to Database");return}catch(err){logger_1.logger.error(`Could not Connect to Database with Error Number: ${err===null||err===void 0?void 0:err.errno}`);retries-=1;logger_1.logger.info(`retries left: ${retries}`);await new Promise(res=>setTimeout(res,5e3))}}logger_1.logger.error("Failed to Connect")};exports.connectToDB=connectToDB;
